<div class="min-h-screen bg-slate-950 text-slate-200 p-6 md:p-10">
  <div class="max-w-5xl mx-auto">
    <div class="flex items-center justify-between mb-8">
      <div>
        <h1 class="text-2xl font-black uppercase text-white"><%= @campaign.title %></h1>
        <p class="text-[10px] text-slate-500 uppercase font-bold mt-1">DM: <%= campaign_dm_name(@campaign) %></p>
      </div>
      <%= link_to "Back to Dashboard", root_path, class: "text-[9px] font-black uppercase text-slate-400 hover:text-white" %>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <div class="lg:col-span-2 space-y-8">
        <div class="bg-slate-900 border-4 border-slate-800 p-6">
          <%= render "campaigns/card_tags", campaign: @campaign %>
          <%= render "campaigns/card_meta", campaign: @campaign %>
        </div>

        <div class="bg-slate-900 border-4 border-slate-800 p-6">
          <h3 class="text-[10px] font-black uppercase text-slate-400 mb-4">Table Chat</h3>
          <% if campaign_join_state(@campaign, current_user) == :member %>
            <%= turbo_stream_from [@campaign, :chat] %>
            <%= render "campaigns/card_chat", campaign: @campaign %>
          <% else %>
            <div class="text-[9px] text-slate-500 uppercase font-bold">
              Chat is locked until you are approved.
            </div>
          <% end %>
        </div>
      </div>

      <aside class="space-y-8">
        <div class="bg-slate-900 border-4 border-slate-800 p-6">
          <h3 class="text-[10px] font-black uppercase text-slate-400 mb-4">Players</h3>
          <%= turbo_stream_from [@campaign, :members] %>
          <div id="campaign_members_<%= @campaign.id %>">
            <%= render "campaigns/members", campaign: @campaign, current_user: current_user %>
          </div>
        </div>

        <div class="bg-slate-900 border-4 border-slate-800 p-6">
          <%= render "campaigns/join_request_card", campaign: @campaign, current_user: current_user %>
        </div>

        <% if dm_for_campaign?(@campaign, current_user) %>
          <div class="bg-slate-900 border-4 border-slate-800 p-6">
            <%= render "campaigns/admin_card", campaign: @campaign %>
          </div>
        <% end %>
      </aside>
    </div>
  </div>
</div>
